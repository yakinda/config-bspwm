import{r as f,o as _,c as u,a as e,b as n,d as h,p as y,e as L,u as S,P as R,f as x,X as U}from"./vendor.639aef4a.js";import{_ as m,H as p,D as c,S as o,G as d}from"./bootstrap-vue-3.55105d6d.js";const k={data(){return{optionURL:p.getURL("/options.html"),ddictTabURL:p.getURL("/ddict_tab.html"),donationURL:"https://ddict.me#donation",readerURL:"https://reader.ddict.me"}},methods:{openTab(t){p.openTab(t)}}},T=t=>(y("data-v-125956a6"),t=t(),L(),t),$={class:"navbar mb-2"},C={class:"container-fluid"},D={class:"navbar-brand text-light",href:"https://ddict.me"},N=h(" Ddict "),j={class:"d-flex"},A={class:"input-group"},B=T(()=>e("span",{class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"}," New ",-1)),G=T(()=>e("span",{class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"}," New ",-1));function I(t,s,a,b,r,l){const i=f("b-icon");return _(),u("nav",$,[e("div",C,[e("a",D,[n(i,{icon:"translate"}),N]),e("form",j,[e("div",A,[e("button",{class:"btn btn-outline-light position-relative",onClick:s[0]||(s[0]=g=>l.openTab(r.readerURL))},[n(i,{icon:"book"}),B]),e("button",{class:"btn btn-outline-light",onClick:s[1]||(s[1]=g=>l.openTab(r.donationURL))},[n(i,{icon:"piggy-bank"})]),e("button",{class:"btn btn-outline-light",onClick:s[2]||(s[2]=g=>l.openTab(r.ddictTabURL))},[n(i,{icon:"box-arrow-up-right"}),G]),e("button",{class:"btn btn-outline-light",onClick:s[3]||(s[3]=g=>l.openTab(r.optionURL))},[n(i,{icon:"gear"})])])])])])}var E=m(k,[["render",I],["__scopeId","data-v-125956a6"]]);const H={},P={class:"row text-center text-muted"},V={class:"col"},O=e("p",{class:"mb-0"}," This site is not affiliated with Google Translate ",-1),X=h(" Since 2011 \u2015 Made with "),F=h(" by "),M=e("b",null,[e("a",{class:"text-dark",target:"_blank",href:"https://ddo.me"},"Ddo")],-1);function q(t,s){const a=f("b-icon");return _(),u("footer",P,[e("small",V,[O,e("p",null,[X,n(a,{icon:"heart-fill"}),F,M])])])}var z=m(H,[["render",q]]);const J={class:"container"},v="There is an issue with the Google Translate server. Please contact me at https://ddict.me",K={data(){return{data:null,select:null,tts:{},lang:null,src:null,target:null,autoTTS:null}},async created(){this.select={src:c.settings.src,target:c.settings.target,srcs:c.languages.sl,targets:c.languages.tl};const t=await o.get(null);await this.load(t)},methods:{async load(t){const s=await this.getLanguages(t),a=t.settings||c.settings;this.lang=t.lang,this.src=a.src,this.target=a.target,this.autoTTS=a.tts,this.select={src:a.src,target:a.target,srcs:s.sl,targets:s.tl},t.last_word&&this.loadData(t.last_word)},async getLanguages(t){if(t.languages)return t.languages;const s=await d.getLanguages(t.lang);return await o.set("languages",s),s},async clear(){await o.remove("last_word")},async translate(t){if(!!t)try{const s=await d.translate(this.lang,t,this.src,this.target);await this.loadData(s),this.autoTTS&&Q(s)&&W(this.tts.src[0]),await o.set("last_word",s)}catch(s){console.error(s),alert(v)}},async loadData(t){this.data=t,this.data.src||(this.data.src=this.select.src),this.data.target||(this.data.target=this.select.target),this.data.ddictSrc=this.select.srcs[t.src],this.data.ddictTarget=this.select.targets[t.target],await this.getTTS(this.data)},async getTTS(t){try{const s=await d.tts(this.lang,t.text,t.src),a=t.sentences.map(r=>r.trans?r.trans:"").join(""),b=await d.tts(this.lang,a,t.target);this.tts={src:[s],target:[b]}}catch(s){console.error(s),alert(v)}},async srctarget(t){this.select=t,this.src=t.src,this.target=t.target;const s=await o.get("settings")||{};s.src=t.src,s.target=t.target,await o.set("settings",s)}}};function Q(t){const s=t.sentences.filter(a=>a.src_translit);return t.dict||s.length>0}function W(t){if(!t)return;const s=new Audio;s.src=t,s.play().catch(()=>{})}const Y=Object.assign(K,{setup(t){return(s,a)=>(_(),u("div",null,[n(E,{class:"container-fluid"}),e("div",J,[n(S(R),{export_data:s.data,export_select:s.select,export_tts:s.tts,onSrctarget:s.srctarget,onTranslate:s.translate,onClear:s.clear},null,8,["export_data","export_select","export_tts","onSrctarget","onTranslate","onClear"])]),n(z,{class:"container-fluid"})]))}}),w=x(Y);w.use(U);w.mount("#app");
